<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Student Dashboard | Campus Mitra</title>
  <link rel="stylesheet" href="dashboard.css">
</head>
<body>
  <div class="dashboard">
    <h1 id="welcome"></h1>

    <div class="options">
      <button class="btn">View Timetable</button>
      <button class="btn">View Attendance</button>
      <button class="btn" id="viewNotes">View Notes</button>
      <button class="btn">Announcements</button>
      <button class="btn">Deadlines</button>
    </div>

    <div id="notesContainer"></div>
  </div>

  <script>
    const studentName = localStorage.getItem("studentName");
    document.getElementById("welcome").innerText = `Welcome to Campus Mitra, ${studentName}!`;

    const notesBtn = document.getElementById("viewNotes");
    const notesContainer = document.getElementById("notesContainer");

    notesBtn.addEventListener("click", async () => {
      const res = await fetch(`/notes/${studentName}`);
      const data = await res.json();

      notesContainer.innerHTML = "<h2>Your Subjects:</h2>";
      if (data.subjects.length === 0) {
        notesContainer.innerHTML += "<p>No notes available yet.</p>";
      } else {
        const ul = document.createElement("ul");
        data.subjects.forEach(sub => {
          const li = document.createElement("li");
          li.textContent = sub;
          ul.appendChild(li);
        });
        notesContainer.appendChild(ul);
      }
    });
  </script>
</body>
</html>
